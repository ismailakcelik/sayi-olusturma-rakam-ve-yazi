<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Sayı Oluşturma</title>
  <style>
    :root { --bg-color: #f0f8ff; }

    body {
      background-color: var(--bg-color);
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      align-items: center;
      min-height: 100vh;
      transition: background-color 0.5s;
    }

    .kapsayici {
      background-color: white;
      margin-top: 20px;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0,0,0,0.2);
      width: 95%;
      max-width: 1440px;
      text-align: center;
    }

    .footer {
      text-align: center;
      margin: 20px 0;
      font-size: 14px;
      color: #555;
      font-style: italic;
    }

    textarea, input[type="text"] {
      padding: 6px;
      font-size: 14px;
      border-radius: 6px;
      border: 1px solid #ccc;
      margin-bottom: 10px;
    }

    textarea { width: 100%; height: 100px; resize: none; }
    .hidden { display: none; }

    input[type="number"] {
      padding: 6px; font-size: 14px; width: 150px;
      border-radius: 6px; border: 1px solid #ccc; margin: 5px;
    }

    .btn {
      padding: 8px 14px; font-size: 14px; margin: 5px;
      cursor: pointer; background-color: #4CAF50; color: white;
      border: none; border-radius: 6px;
    }
    .btn:hover { background-color: #45a049; }

    #sonSayi { font-size: 100px; font-weight: bold; margin: 10px 0; }

    .ogrenci-listesi {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      margin-top: 25px;
      max-height: 300px;
      overflow-y: auto;
      padding: 10px;
    }

    .ogrenci {
      width: 70px;
      height: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 8px;
      background-color: #e0e0e0;
      border-radius: 8px;
      cursor: pointer;
      text-align: center;
      transition: 0.3s;
    }

    .ogrenci:hover { transform: scale(1.05); }

    .dogru {
      background-color: #ffcc80 !important;
      font-weight: bold; box-shadow: 0 0 8px rgba(0,0,0,0.2);
    }

    table { width: 100%; border-collapse: collapse; margin-top: 10px; }
    th, td { border: 1px solid #ccc; padding: 6px; font-size: 14px; text-align: center; }

    #puanAlani { margin-top: 20px; }
    .puan-butonu { background-color: #2196F3; }

    .ilk-uc-wrapper {
      display: flex; justify-content: center; gap: 20px;
      margin-bottom: 15px; flex-wrap: wrap;
    }

    .ilk-uc-kutu {
      background-color: #fff9c4;
      border: 2px solid #ccc;
      border-radius: 12px;
      padding: 10px;
      min-width: 150px;
      box-shadow: 0 0 5px rgba(0,0,0,0.1);
      text-align: center;
      font-weight: bold;
      box-sizing: border-box;
    }

    .ilk-uc-kutu span.madalya { font-size: 24px; display: block; margin-bottom: 6px; }
    .ilk-uc-kutu .isim { font-size: 15px; line-height: 1.3; }
    .ilk-uc-kutu .puan { font-size: 14px; font-weight: normal; color: #444; margin-top: 4px; }

    .ilk-1 { background-color: #ffe082; }
    .ilk-2 { background-color: #e0e0e0; }
    .ilk-3 { background-color: #d7ccc8; }

    .modal {
      display: none; position: fixed; z-index: 1000;
      inset: 0; background-color: rgba(0,0,0,0.5);
      align-items: center; justify-content: center;
    }
    .modal-icerik {
      background: #fff; padding: 16px 18px; border-radius: 10px;
      text-align: center; min-width: 280px; max-width: 600px; width: 90%;
      box-shadow: 0 0 10px rgba(0,0,0,0.25);
    }
    .modal-icerik button {
      margin-top: 10px;
      padding: 6px 12px; border: none; border-radius: 6px;
      background: #4CAF50; color: #fff; cursor: pointer; font-size: 14px;
    }
    .modal-icerik button:hover { background: #45a049; }
  </style>
</head>
<body>
  <div class="kapsayici">
    <div id="girisEkrani">
      <h3>📝 Etkinliğin Başlığını ve Katılımcı Adlarını Girin 📝</h3>
      <input type="text" id="baslikInput" placeholder="Etkinlik Başlığı" style="width:100%;"><br>
      <textarea id="ogrenciTextarea" placeholder="Katılımcı isimlerini her satıra bir tane olacak şekilde yazınız."></textarea><br>
      <button class="btn" onclick="basla()">🏁 BAŞLA 🏁</button>
    </div>

    <div id="oyunEkrani" class="hidden">
      <h2 id="baslikAlani"></h2>
      <div>
        <label>🧮 Basamak Aralığı 🧮</label><br>
        <input type="number" id="minBasamak" min="1" max="9" placeholder="En Küçük Basamak">
        <input type="number" id="maxBasamak" min="1" max="9" placeholder="En Büyük Basamak">
      </div>
      <div><button class="btn" onclick="sayiUret()">🔢 Sayı Üret 🔢</button></div>
      <div id="sonSayi">–</div>
      <div class="ogrenci-listesi" id="ogrenciler"></div>
      <div id="puanAlani">
        <button class="btn puan-butonu" onclick="puanModalAc()">🥇🥈🥉 Puan Tablosu 🥉🥈🥇</button>
      </div>
    </div>
  </div>

  <div class="footer">made by İSMAİL AKÇELİK</div>

  <!-- 📊 Puan Tablosu Modal -->
  <div id="puanModal" class="modal">
    <div class="modal-icerik">
      <h3>🥇🥈🥉 Puan Tablosu 🥉🥈🥇</h3>
      <div class="ilk-uc-container"></div>
      <table>
        <thead><tr><th>İsim</th><th>Puan</th></tr></thead>
        <tbody id="puanTabloGovde"></tbody>
      </table>
      <button onclick="puanModalKapat()">Kapat</button>
    </div>
  </div>

  <!-- ⚠️ Uyarı Modal -->
  <div id="uyariModal" class="modal">
    <div class="modal-icerik">
      <p id="uyariMesaji"></p>
      <button onclick="uyariModalKapat()">Tamam</button>
    </div>
  </div>

  <script>
    const renkler=["#f0f8ff","#e8f5e9","#fffde7","#fce4ec","#f3e5f5","#ede7f6","#e0f7fa","#f1f8e9","#fbe9e7"];
    let ogrenciler=[]; let puanlar={};

    // ✅ Uyarı Modal fonksiyonları
    function uyariGoster(mesaj){
      document.getElementById("uyariMesaji").textContent=mesaj;
      document.getElementById("uyariModal").style.display="flex";
    }
    function uyariModalKapat(){ document.getElementById("uyariModal").style.display="none"; }

    function basla(){
      const baslik=document.getElementById("baslikInput").value.trim();
      const metin=document.getElementById("ogrenciTextarea").value.trim();
      if(!baslik){uyariGoster("Lütfen etkinliğin adını yazınız.");return;}
      if(!metin){uyariGoster("Lütfen katılımcı isimlerini yazınız.");return;}
      ogrenciler=metin.split('\n').map(i=>i.trim()).filter(i=>i);
      puanlar={}; document.getElementById("baslikAlani").textContent=baslik;
      document.getElementById("girisEkrani").classList.add("hidden");
      document.getElementById("oyunEkrani").classList.remove("hidden");
      const ogrenciAlani=document.getElementById("ogrenciler");
      ogrenciAlani.innerHTML="";
      ogrenciler.forEach(isim=>{
        puanlar[isim]=0;
        const div=document.createElement("div");
        div.className="ogrenci"; div.textContent=isim;
        div.onclick=function(){
          if(div.classList.contains("dogru")){
            div.classList.remove("dogru");
            puanlar[isim]=Math.max(0,puanlar[isim]-1);
          } else {
            div.classList.add("dogru");
            puanlar[isim]++;
          }
          puanTablosunuGuncelle();
        };
        ogrenciAlani.appendChild(div);
      });
      puanTablosunuGuncelle();
    }

    // ✅ Türkçe sayı yazıya çevirme
    function sayiYaziyaCevir(n){
      const birler=["","bir","iki","üç","dört","beş","altı","yedi","sekiz","dokuz"];
      const onlar=["","on","yirmi","otuz","kırk","elli","altmış","yetmiş","seksen","doksan"];
      function yuzlerBasamak(sayi){
        let y=Math.floor(sayi/100),o=Math.floor((sayi%100)/10),b=sayi%10,sonuc="";
        if(y>0){ if(y>1) sonuc+=birler[y]+" "; sonuc+="yüz "; }
        if(o>0) sonuc+=onlar[o]+" ";
        if(b>0) sonuc+=birler[b]+" ";
        return sonuc.trim();
      }
      if(n===0) return "sıfır";
      let milyon=Math.floor(n/1000000),bin=Math.floor((n%1000000)/1000),kalan=n%1000;
      let sonuc="";
      if(milyon>0) sonuc+=(milyon>1?yuzlerBasamak(milyon)+" ":"")+"milyon ";
      if(bin>0) sonuc+=(bin===1?"bin ":yuzlerBasamak(bin)+" bin ");
      if(kalan>0) sonuc+=yuzlerBasamak(kalan);
      return sonuc.trim();
    }

    function sayiUret(){
      const min=parseInt(document.getElementById("minBasamak").value);
      const max=parseInt(document.getElementById("maxBasamak").value);
      if(isNaN(min)||isNaN(max)){uyariGoster("Lütfen basamak aralıklarını yazınız.");return;}
      if(min<1||max>9||min>max){uyariGoster("Lütfen geçerli bir basamak aralığı girin (1-9).");return;}
      const minDeger=Math.pow(10,min-1),maxDeger=Math.pow(10,max)-1;
      const sayi=Math.floor(Math.random()*(maxDeger-minDeger+1))+minDeger;
      document.getElementById("sonSayi").textContent=Math.random()<0.5?sayi:sayiYaziyaCevir(sayi);
      document.querySelectorAll(".ogrenci").forEach(div=>div.classList.remove("dogru"));
      document.body.style.backgroundColor=renkler[Math.floor(Math.random()*renkler.length)];
    }

    // ✅ Puan tablosu modal
    function puanModalAc(){ document.getElementById("puanModal").style.display="flex"; puanTablosunuGuncelle(); }
    function puanModalKapat(){ document.getElementById("puanModal").style.display="none"; }

    // ✅ ESC ve dış tıklama her iki modalı da kapatsın
    window.addEventListener("keydown", e => {
      if(e.key==="Escape"){ puanModalKapat(); uyariModalKapat(); }
    });
    window.addEventListener("click", e => {
      if(e.target.classList.contains("modal")){ e.target.style.display="none"; }
    });

    // ✅ Puan tablosu güncelle
    function puanTablosunuGuncelle(){
      const tabloGovde=document.getElementById("puanTabloGovde");
      const ilkUcContainer=document.querySelector(".ilk-uc-container");
      tabloGovde.innerHTML="";
      ilkUcContainer.innerHTML="";
      const sirali=[...ogrenciler].sort((a,b)=>puanlar[b]-puanlar[a]);
      let uniqueScores=[...new Set(sirali.map(isim=>puanlar[isim]))].slice(0,3);
      const ilkUcDiv=document.createElement("div"); ilkUcDiv.className="ilk-uc-wrapper";
      uniqueScores.forEach((puan,index)=>{
        const ayniPuanli=sirali.filter(isim=>puanlar[isim]===puan);
        if(ayniPuanli.length>0){
          const kutu=document.createElement("div");
          kutu.className=`ilk-uc-kutu ilk-${index+1}`;
          let madalya=index===0?"🥇":index===1?"🥈":"🥉";
          kutu.innerHTML=`<span class="madalya">${madalya}</span>`;
          ayniPuanli.forEach(isim=>{ kutu.innerHTML+=`<div class="isim">${isim}</div>`; });
          kutu.innerHTML+=`<div class="puan">(${puan})</div>`;
          ilkUcDiv.appendChild(kutu);
        }
      });
      ilkUcContainer.appendChild(ilkUcDiv);
      sirali.forEach(isim=>{
        if(!uniqueScores.includes(puanlar[isim])){
          const tr=document.createElement("tr");
          tr.innerHTML=`<td>${isim}</td><td>${puanlar[isim]}</td>`;
          tabloGovde.appendChild(tr);
        }
      });
    }
  </script>
</body>
</html>
